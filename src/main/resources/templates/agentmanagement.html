<!doctype html>
<html lang="en" xmlns:th = "http://www.thymeleaf.org">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css}" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        #success_message {
            display: none;
        }

        body{
            background-color: rgb(238, 238, 238);
        }

        .domain {
            width: 100%;
        }
    </style>

    <title>Manage Agents</title>
</head>

<body>

    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl" id="navbarBlur"
        navbar-scroll="true">
        <div class="container-fluid py-1 px-3">
            <nav aria-label="breadcrumb">
                <h6 class="font-weight-bolder mb-0">WholeSaleAgency</h6>
            </nav>
            
            <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">	
                
                    <div class="ms-md-auto pe-md-3 d-flex align-items-center">
                    <a th:href="@{/logout}"><div class="btn-sm btn-secondary">
                        logout
                    </div></a>
                </div>
                
                <ul class="navbar-nav  justify-content-end">
                    <li class="nav-item d-flex align-items-center">
                        <a th:href="@{/}" class="nav-link text-body font-weight-bold px-0">
                            <div class="btn-sm btn-secondary">Home
                            </div>
                        </a>
                    </li>
                    <li class="nav-item d-flex align-items-center">
                    	<a href="javascript:;" class="nav-link text-body font-weight-bold px-0">
                            <i class="fa fa-user me-sm-1"></i>
                            <span class="d-sm-inline d-none" th:text="${email}"></span>
                        </a>
                    </li>
                </ul>
            	
            	</div>
        </div>
    </nav>

    <div class="container-fluid py-4">
        <div class="row">
            <div class="col-md-1 "></div>
            <div class="col-md-4 ">
                <!-- <div class="border">okayjbdbhdbhddddddddddddddddddddddddddddddddddddddddddddd</div> -->
                <div class="row">
                    <div class="col-md-10">
                        <form class="well form-horizontal" th:action="@{/agent}" method="post" id="agent_form" th:object="${agent}">
                            <fieldset>

                                <!-- Form Name -->
                                <legend>
                                    <center>
                                        <h2><b>Agent Registration Form</b></h2>
                                    </center>
                                </legend><br>

                                <!-- Text input-->

                                <div class="form-group">
                                    <label class=" control-label">First Name</label>
                                    <div class=" inputGroupContainer">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i
                                                    class="glyphicon glyphicon-user"></i></span>
                                            <input name="firstname" placeholder="First Name" class="form-control" field="*{firstname}"
                                                type="text">
                                        </div>
                                    </div>
                                </div>

                                <!-- Text input-->

                                <div class="form-group">
                                    <label class=" control-label">Last Name</label>
                                    <div class=" inputGroupContainer">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i
                                                    class="glyphicon glyphicon-user"></i></span>
                                            <input name="lastname" placeholder="Last Name" class="form-control" field="*{lastname}"
                                                type="text">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class=" control-label">Address</label>
                                    <div class=" inputGroupContainer">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i
                                                    class="glyphicon glyphicon-user"></i></span>
                                            <input name="address" placeholder="Address" class="form-control" field="*{address}"
                                                type="text">
                                        </div>
                                    </div>
                                </div>

								<!-- Text input-->
								

                                <div class="form-group">
                                    <label class="control-label">Contact</label>
                                    <div class="inputGroupContainer">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i
                                                    class="glyphicon glyphicon-earphone"></i></span>
                                            <input name="phone" placeholder="(639)" class="form-control" field="*{phone}"
                                                type="text">
                                        </div>
                                    </div>
                                </div>
                                <!-- Text input-->
                                <div class="form-group">
                                    <label class=" control-label">E-Mail</label>
                                    <div class=" inputGroupContainer">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i
                                                    class="glyphicon glyphicon-envelope"></i></span>
                                            <input name="email" placeholder="E-Mail Address" class="form-control" field="*{email}"
                                                type="email">
                                        </div>
                                    </div>
                                </div>

                                <!-- Text input-->

                                <div class="form-group">
                                    <label class=" control-label">Password</label>
                                    <div class=" inputGroupContainer">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i
                                                    class="glyphicon glyphicon-user"></i></span>
                                            <input name="password" placeholder="Password" class="form-control" field="*{password}"
                                                type="password">
                                        </div>
                                    </div>
                                </div>

                                <!-- Text input-->
                                <!-- Select Basic -->

                                <!-- Success message -->
                                <div class="alert alert-success" role="alert" th:if = "${success} == true">
									<p>Successfully registered. Your Agent Id is </p>
									<p th:text="${agentID}"></p>
								</div>
                                <div class="alert alert-success" role="alert" id="success_message"> <i
                                        class="glyphicon glyphicon-thumbs-up"></i> Success!.</div>

                                <!-- Button -->
                                <div class="form-group">
                                    <label class=" control-label"></label>
                                    <div class="d-grid "><br>
                                        &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<button
                                            type="submit"
                                            class="btn btn-primary">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspSUBMIT <span
                                                class="glyphicon glyphicon-send"></span>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</button>
                                    </div>
                                </div>
                                
                                <div class="row pl-5 mt-2">
                                	<a th:href="@{/agent/allagents}">
                                	<div class=" btn btn-outline-secondary" style="width:100%">
 		                               	Show All Agents
                                	</div>
 		                               	</a>
                                </div>

                            </fieldset>
                        </form>
                        
                    </div>
                    
                </div>
            </div>
           
            <div class="col-md-7">
                <div class="row">
                    <legend>
                        <center>
                            <h2><b>Search by</b></h2>
                        </center>
                    </legend><br>
                    <form th:action="@{/agent/search}" method = "post" th:object = "${agent}">
	                    <div class="form-group mt-1">
	                        <!-- <label class=" control-label">Agent Name</label> -->
	                        <div class=" inputGroupContainer">
	                            <div class="input-group">
	                                <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
	                                <input name="email" placeholder="Agent email" class="form-control" type="text" field="*{email}">
	                            </div>
	                        </div>
	                    </div>
	                    <div class="form-group mt-1">
	                        <!-- <label class=" control-label">Agent Id</label> -->
	                        <div class=" inputGroupContainer">
	                            <div class="input-group">
	                                <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
	                                <input name="customerID" placeholder="Agent Id" class="form-control" type="number" field="*{agentID}">
	                            </div>
	                        </div>
	                    </div>
	                    <div class="d-grid mt-1">
	                        <button type="submit" class="btn btn-outline-info">Search</button>
	                    </div>
                    </form>
                    <!-- <div class="row mt-3"> -->
                        <div class="col mt-4">
                            <div class="card  mb-4">
                                <div class="card-header pb-0">
                                    <h6>Matched Agents</h6>
                                </div>
                                <div class="card-body px-0 pt-0 pb-2">
                                    <div class="table-responsive p-0">
                                    	
                                        <table class="table align-items-center mb-0">
                                            <thead>
                                                <tr>
                                                    <th
                                                        class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                                        AgentID</th>
                                                    <th
                                                        class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">
                                                        Name</th>
                                                    <th
                                                        class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                                        Email</th>
                                                    <th
                                                        class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                                                        Phone</th>
                                                    <th class="text-secondary opacity-7"> </th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr th:each="agent : ${agents}">
                                                
                                                    <td>
                                                        <div class="d-flex px-2 py-1">
                                                            <div class="d-flex flex-column justify-content-center">
                                                                <h6 class="mb-0 text-sm" th:text="${agent.agentID}"></h6>
                                                            </div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <p class="text-xs font-weight-bold mb-0" th:text="${agent.firstname}"></p>
                                                        <p class="text-xs text-weight-bold mb-0" th:text="${agent.lastname}"></p>
                                                    </td>
                                                    <td class="align-middle text-center text-sm">
                                                        <span class="text-secondary text-xs" th:text="${agent.email}" ></span>
                                                    </td>
                                                    <td class="align-middle text-center">
                                                        <span
                                                            class="text-secondary text-xs font-weight-bold" th:text="${agent.phone}"></span>
                                                    </td>
                                                    
                                                    <form th:action="@{/agent/edit}" method="post" id="agent_edit_form" th:object="${agentcurrent}">
                                                    <td class="align-middle">
                                                    	<input type="hidden" id="customerId" name="customerId"  th:value="${agent.agentID}">
                                                    	<input type="hidden" id="firstname" name="firstname"  th:value="${agent.firstname}">
                                                    	<input type="hidden" id="lastname" name="lastname"  th:value="${agent.lastname}">
                                                    	<input type="hidden" id="email" name="email"  th:value="${agent.email}">
                                                    	<input type="hidden" id="address" name="address"  th:value="${agent.address}">
                                                    	<input type="hidden" id="phone" name="phone"  th:value="${agent.phone}">
                                                    	<input type="hidden" id="password" name="password"  th:value="${agent.password}">
                                                        <button
                                                            data-toggle="tooltip" data-original-title="Edit user">
                                                            Edit
                                                        </button>
                                                    </td>
                                                    </form>
                                                    <form th:action="@{/agent/delete}" method = "post" id = "agent_delete_form" th:object="${agenttodelete}">
                                                    	<td class="align-middle">	
                                                    		<input type="hidden" id="emailtodelete" name="email" th:value="${agent.email}" field="*{email}">
                                                    		<button data-toggle="tooltip" data-original-title="Edit user">
                                                            	Delete
                                                            	</button>
                                                        </td>    	
                                                    </form>
                                                </tr>
                                                
                                                
                                                

                                            </tbody>
                                        </table>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <!-- </div> -->
                </div>
            </div>
        </div>
    </div>

    <!-- <h1>Hello, world!</h1> -->

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js}"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->

    <script>
        $(document).ready(function () {
            $('#customer_form').bootstrapValidator({
                // To use feedback icons, ensure that you use Bootstrap v3.1.0 or later
                feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                fields: {
                    firstname: {
                        validators: {
                            stringLength: {
                                min: 2,
                            },
                            notEmpty: {
                                message: 'Please enter your First Name'
                            }
                        }
                    },
                    lastname: {
                        validators: {
                            stringLength: {
                                min: 2,
                            },
                            notEmpty: {
                                message: 'Please enter your Last Name'
                            }
                        }
                    },
                    user_name: {
                        validators: {
                            stringLength: {
                                min: 8,
                            },
                            notEmpty: {
                                message: 'Please enter your Username'
                            }
                        }
                    },
                    user_password: {
                        validators: {
                            stringLength: {
                                min: 8,
                            },
                            notEmpty: {
                                message: 'Please enter your Password'
                            }
                        }
                    },
                    confirm_password: {
                        validators: {
                            stringLength: {
                                min: 8,
                            },
                            notEmpty: {
                                message: 'Please confirm your Password'
                            }
                        }
                    },
                    email: {
                        validators: {
                            notEmpty: {
                                message: 'Please enter your Email Address'
                            },
                            emailAddress: {
                                message: 'Please enter a valid Email Address'
                            }
                        }
                    },
                    phone: {
                        validators: {
                            stringLength: {
                                min: 12,
                                max: 12,
                                notEmpty: {
                                    message: 'Please enter your Contact No.'
                                }
                            }
                        },
                    
                        department: {
                            validators: {
                                notEmpty: {
                                    message: 'Please select your Department/Office'
                                }
                            }
                        },
                    }
                }
            })
                .on('success.form.bv', function (e) {
                    $('#success_message').slideDown({ opacity: "show" }, "slow") // Do something ...
                    $('#contact_form').data('bootstrapValidator').resetForm();

                    // Prevent form submission
                    e.preventDefault();

                    // Get the form instance
                    var $form = $(e.target);

                    // Get the BootstrapValidator instance
                    var bv = $form.data('bootstrapValidator');

                    // Use Ajax to submit form data
                    $.post($form.attr('action'), $form.serialize(), function (result) {
                        console.log(result);
                    }, 'json');
                });
        });
    </script>
</body>

</html>


<!-- <div class="container"> -->


<!-- </div> -->
<!-- </div>/.container -->